(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{450:function(t,e,s){"use strict";s.r(e);var a=s(27),_=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"windows批处理合并源码文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows批处理合并源码文件"}},[t._v("#")]),t._v(" Windows批处理合并源码文件")]),t._v(" "),e("p",[t._v("在某些场景下（如软件著作权申请），需要将项目中的所有源代码合并成一个文件。手动复制粘贴既费时又容易出错，这时候一个简单的批处理脚本就能帮我们自动完成。")]),t._v(" "),e("h2",{attrs:{id:"使用场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),e("ul",[e("li",[t._v("软件著作权申请需要提交源代码文件")]),t._v(" "),e("li",[t._v("代码审查或分享时需要合并多个文件")]),t._v(" "),e("li",[t._v("备份或归档项目代码")]),t._v(" "),e("li",[t._v("生成代码文档")])]),t._v(" "),e("h2",{attrs:{id:"批处理脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#批处理脚本"}},[t._v("#")]),t._v(" 批处理脚本")]),t._v(" "),e("p",[t._v("以下是一个通用的源码合并脚本：")]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("@echo off\nREM 文件过滤器\nset file_filter=*.ts *.js *.json *.map *.css\n\nREM 指定原目录\nset src_dir=D:\\\\workspace\\\\软著代码合并\\\\file\\\\web\nREM 指定输出文件\nset output_file=D:\\\\workspace\\\\软著代码合并\\\\web.log\n\ncd %src_dir%\ndel %output_file%\nfor /F %%i in ('dir /b/s/a:-d %file_filter%') do (\n    type %%i>>%output_file%\n)\n")])])]),e("h2",{attrs:{id:"脚本说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚本说明"}},[t._v("#")]),t._v(" 脚本说明")]),t._v(" "),e("h3",{attrs:{id:"配置项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置项"}},[t._v("#")]),t._v(" 配置项")]),t._v(" "),e("p",[e("strong",[t._v("1. 文件过滤器")])]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("set file_filter=*.ts *.js *.json *.map *.css\n")])])]),e("p",[t._v("指定要合并的文件类型。可以根据需要添加或删除文件扩展名。")]),t._v(" "),e("p",[e("strong",[t._v("2. 源目录")])]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("set src_dir=D:\\\\workspace\\\\软著代码合并\\\\file\\\\web\n")])])]),e("p",[t._v("指定要扫描的源代码目录。注意路径中的 "),e("code",[t._v("\\")]),t._v(" 需要使用 "),e("code",[t._v("\\\\")]),t._v(" 转义。")]),t._v(" "),e("p",[e("strong",[t._v("3. 输出文件")])]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("set output_file=D:\\\\workspace\\\\软著代码合并\\\\web.log\n")])])]),e("p",[t._v("指定合并后的输出文件路径。")]),t._v(" "),e("h3",{attrs:{id:"核心命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心命令"}},[t._v("#")]),t._v(" 核心命令")]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("for /F %%i in ('dir /b/s/a:-d %file_filter%') do (\n    type %%i>>%output_file%\n)\n")])])]),e("p",[e("strong",[t._v("命令解析：")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("dir /b/s/a:-d")]),t._v(" - 递归查找文件\n"),e("ul",[e("li",[e("code",[t._v("/b")]),t._v(" - 仅显示文件名")]),t._v(" "),e("li",[e("code",[t._v("/s")]),t._v(" - 搜索子目录")]),t._v(" "),e("li",[e("code",[t._v("/a:-d")]),t._v(" - 排除目录，只显示文件")])])]),t._v(" "),e("li",[e("code",[t._v("type %%i>>%output_file%")]),t._v(" - 将文件内容追加到输出文件")])]),t._v(" "),e("h2",{attrs:{id:"使用方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[t._v("#")]),t._v(" 使用方法")]),t._v(" "),e("ol",[e("li",[e("p",[e("strong",[t._v("创建脚本文件")])]),t._v(" "),e("ul",[e("li",[t._v("将代码保存为 "),e("code",[t._v("merge-source.bat")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("修改配置")])]),t._v(" "),e("ul",[e("li",[t._v("修改 "),e("code",[t._v("file_filter")]),t._v(" 为需要的文件类型")]),t._v(" "),e("li",[t._v("修改 "),e("code",[t._v("src_dir")]),t._v(" 为项目源代码目录")]),t._v(" "),e("li",[t._v("修改 "),e("code",[t._v("output_file")]),t._v(" 为输出文件路径")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("执行脚本")])]),t._v(" "),e("ul",[e("li",[t._v("双击运行 "),e("code",[t._v("merge-source.bat")])]),t._v(" "),e("li",[t._v("等待执行完成，查看输出文件")])])])]),t._v(" "),e("h2",{attrs:{id:"改进版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#改进版本"}},[t._v("#")]),t._v(" 改进版本")]),t._v(" "),e("h3",{attrs:{id:"添加文件分隔符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加文件分隔符"}},[t._v("#")]),t._v(" 添加文件分隔符")]),t._v(" "),e("p",[t._v("为了在合并文件中区分不同的源文件，可以添加分隔符：")]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("@echo off\nset file_filter=*.ts *.js *.json\nset src_dir=D:\\\\workspace\\\\project\\\\src\nset output_file=D:\\\\workspace\\\\merged.txt\n\ncd %src_dir%\nif exist %output_file% del %output_file%\n\nfor /F %%i in ('dir /b/s/a:-d %file_filter%') do (\n    echo. >> %output_file%\n    echo ==================== >> %output_file%\n    echo 文件: %%i >> %output_file%\n    echo ==================== >> %output_file%\n    type %%i >> %output_file%\n    echo. >> %output_file%\n)\n\necho 合并完成！共处理文件：\ndir /b/s/a:-d %file_filter% | find /c /v \"\"\n")])])]),e("h3",{attrs:{id:"添加进度显示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加进度显示"}},[t._v("#")]),t._v(" 添加进度显示")]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("@echo off\nset file_filter=*.ts *.js *.json\nset src_dir=D:\\\\workspace\\\\project\\\\src\nset output_file=D:\\\\workspace\\\\merged.txt\n\ncd %src_dir%\nif exist %output_file% del %output_file%\n\necho 开始合并文件...\nset count=0\n\nfor /F %%i in ('dir /b/s/a:-d %file_filter%') do (\n    set /a count+=1\n    echo 正在处理第 !count! 个文件: %%~nxi\n    type %%i >> %output_file%\n)\n\necho.\necho 合并完成！共处理 %count% 个文件\n")])])]),e("h2",{attrs:{id:"注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("字符编码")]),t._v("：合并后的文件编码可能不一致，建议使用支持多种编码的编辑器打开")]),t._v(" "),e("li",[e("strong",[t._v("文件大小")]),t._v("：如果项目很大，合并后的文件可能非常大，注意磁盘空间")]),t._v(" "),e("li",[e("strong",[t._v("路径问题")]),t._v("：Windows 路径中的反斜杠需要转义为 "),e("code",[t._v("\\\\")])]),t._v(" "),e("li",[e("strong",[t._v("权限问题")]),t._v("：确保对源目录和输出目录有读写权限")])]),t._v(" "),e("h2",{attrs:{id:"小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),e("p",[t._v("这个批处理脚本虽然简单，但在需要合并源代码文件时非常实用。特别是在申请软件著作权时，能够快速生成符合要求的代码文件。根据实际需求修改文件过滤器和输出格式，就能适应各种场景。")])])}),[],!1,null,null,null);e.default=_.exports}}]);