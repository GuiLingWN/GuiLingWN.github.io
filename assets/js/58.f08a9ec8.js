(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{370:function(a,t,s){"use strict";s.r(t);var n=s(27),e=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"青龙面板部署与任务管理实践"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#青龙面板部署与任务管理实践"}},[a._v("#")]),a._v(" 青龙面板部署与任务管理实践")]),a._v(" "),t("p",[a._v("青龙面板是一个支持Python、JavaScript、Shell等脚本的定时任务管理平台。本文记录了使用Docker部署青龙面板和配置自动化任务的实践过程。")]),a._v(" "),t("h2",{attrs:{id:"docker部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker部署"}},[a._v("#")]),a._v(" Docker部署")]),a._v(" "),t("h3",{attrs:{id:"拉取镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[a._v("#")]),a._v(" 拉取镜像")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 拉取最新版本")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull whyour/qinglong:latest\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更新镜像")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull whyour/qinglong:latest\n")])])]),t("h3",{attrs:{id:"启动容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[a._v("#")]),a._v(" 启动容器")]),a._v(" "),t("p",[t("strong",[a._v("普通服务器：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PWD")]),a._v("/ql/config:/ql/config "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PWD")]),a._v("/ql/log:/ql/log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PWD")]),a._v("/ql/db:/ql/db "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PWD")]),a._v("/ql/scripts:/ql/scripts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5700")]),a._v(":5700 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   whyour/qinglong:latest\n")])])]),t("p",[t("strong",[a._v("新版本（推荐）：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PWD")]),a._v("/ql/config:/ql/data/config "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PWD")]),a._v("/ql/log:/ql/data/log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PWD")]),a._v("/ql/db:/ql/data/db "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   whyour/qinglong:latest\n")])])]),t("p",[t("strong",[a._v("NAS群晖等设备：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /volume2/docker/ql/data:/ql/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--hostname")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   whyour/qinglong:latest\n")])])]),t("h2",{attrs:{id:"初始配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始配置"}},[a._v("#")]),a._v(" 初始配置")]),a._v(" "),t("h3",{attrs:{id:"首次登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#首次登录"}},[a._v("#")]),a._v(" 首次登录")]),a._v(" "),t("ol",[t("li",[a._v("访问："),t("code",[a._v("http://<服务器IP>:5700")])]),a._v(" "),t("li",[a._v("使用默认账号登录："),t("code",[a._v("admin / adminadmin")])]),a._v(" "),t("li",[a._v("系统提示已初始化密码")])]),a._v(" "),t("h3",{attrs:{id:"查看初始密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看初始密码"}},[a._v("#")]),a._v(" 查看初始密码")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看配置文件中的密码")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /ql/config/auth.json\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或在挂载目录中查看")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PWD")]),a._v("/ql/config/auth.json\n")])])]),t("h2",{attrs:{id:"基本命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本命令"}},[a._v("#")]),a._v(" 基本命令")]),a._v(" "),t("h3",{attrs:{id:"容器管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器管理"}},[a._v("#")]),a._v(" 容器管理")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更新青龙")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql update\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重启青龙（更新并编译）")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql restart\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除容器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" qinglong\n")])])]),t("h3",{attrs:{id:"任务管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#任务管理"}},[a._v("#")]),a._v(" 任务管理")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 拉取脚本仓库")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql repo "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("repourl"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("blacklist"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("dependence"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("branch"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 拉取单个脚本")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql raw "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("fileurl"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 立即执行脚本")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong task test.js now\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 并行执行脚本")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong task test.js conc\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 导出助力码")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql code\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 测试通知")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong notify "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\n")])])]),t("h3",{attrs:{id:"日志管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志管理"}},[a._v("#")]),a._v(" 日志管理")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除7天前的日志")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql rmlog "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除30天前的日志")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql rmlog "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("\n")])])]),t("h2",{attrs:{id:"拉取脚本仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拉取脚本仓库"}},[a._v("#")]),a._v(" 拉取脚本仓库")]),a._v(" "),t("h3",{attrs:{id:"命令格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令格式"}},[a._v("#")]),a._v(" 命令格式")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("ql repo "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("repourl"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("blacklist"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("dependence"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("branch"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[a._v("参数说明：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("repourl")]),a._v(": 仓库地址")]),a._v(" "),t("li",[t("code",[a._v("path")]),a._v(": 拉取哪些脚本（匹配规则）")]),a._v(" "),t("li",[t("code",[a._v("blacklist")]),a._v(": 不拉取哪些（黑名单）")]),a._v(" "),t("li",[t("code",[a._v("dependence")]),a._v(": 依赖文件")]),a._v(" "),t("li",[t("code",[a._v("branch")]),a._v(": 分支名称（可选）")])]),a._v(" "),t("h3",{attrs:{id:"示例仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例仓库"}},[a._v("#")]),a._v(" 示例仓库")]),a._v(" "),t("p",[t("strong",[a._v("通用脚本库：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 国外网络")]),a._v("\nql repo https://github.com/KingRan/JDJB.git "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"jd_|jx_|jdCookie"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"activity|backUp"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^jd[^_]|USER|utils|function|sendNotify|ql|JDJR"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 国内网络（使用代理）")]),a._v("\nql repo https://ghproxy.com/github.com/KingRan/JDJB.git "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"jd_|jx_|jdCookie"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"activity|backUp"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^jd[^_]|USER|utils|function|sendNotify|ql|JDJR"')]),a._v("\n")])])]),t("p",[t("strong",[a._v("拉取单个脚本：")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用raw命令")]),a._v("\nql raw https://raw.githubusercontent.com/author/repo/main/script.js\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用国内代理")]),a._v("\nql raw https://ghproxy.com/https://raw.githubusercontent.com/author/repo/main/script.js\n")])])]),t("h2",{attrs:{id:"telegram-bot配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#telegram-bot配置"}},[a._v("#")]),a._v(" Telegram Bot配置")]),a._v(" "),t("p",[a._v("青龙面板支持通过Telegram Bot进行交互式管理。")]),a._v(" "),t("h3",{attrs:{id:"安装bot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装bot"}},[a._v("#")]),a._v(" 安装Bot")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 最新版本直接执行")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql bot\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或在容器内执行")]),a._v("\nql bot\n")])])]),t("h3",{attrs:{id:"配置bot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置bot"}},[a._v("#")]),a._v(" 配置Bot")]),a._v(" "),t("p",[a._v("创建"),t("code",[a._v("config/bot.json")]),a._v("文件：")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"user_id"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123456789")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"bot_token"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"your_bot_token"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"api_id"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"your_api_id"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"api_hash"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"your_api_hash"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"proxy"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"StartCMD"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"noretry"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h3",{attrs:{id:"获取配置参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取配置参数"}},[a._v("#")]),a._v(" 获取配置参数")]),a._v(" "),t("p",[t("strong",[a._v("A. 申请Telegram Bot：")])]),a._v(" "),t("ul",[t("li",[a._v("找@BotFather创建机器人")]),a._v(" "),t("li",[a._v("获取bot_token")])]),a._v(" "),t("p",[t("strong",[a._v("B. 获取user_id：")])]),a._v(" "),t("ul",[t("li",[a._v("找@userinfobot获取你的user_id")])]),a._v(" "),t("p",[t("strong",[a._v("C. 获取api_id和api_hash：")])]),a._v(" "),t("ul",[t("li",[a._v("访问https://my.telegram.org/apps")]),a._v(" "),t("li",[a._v("创建应用获取")])]),a._v(" "),t("h3",{attrs:{id:"启用bot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启用bot"}},[a._v("#")]),a._v(" 启用Bot")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动Bot")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong ql bot\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置开机自启")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 编辑config.sh")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# 将AutostartBot=""改为AutostartBot="true"')]),a._v("\n")])])]),t("h3",{attrs:{id:"bot快捷菜单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bot快捷菜单"}},[a._v("#")]),a._v(" Bot快捷菜单")]),a._v(" "),t("p",[a._v("找@BotFather发送"),t("code",[a._v("/setcommands")]),a._v("，粘贴以下内容：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("getcookie - 扫码获取cookie\nbean - 获取收支\nchart - 统计收支变化\ncmd - 执行cmd命令\nedit - 编辑文件\ndl - 下载文件\ngetfile - 获取目录下文件\nlog - 选择日志\nnode - 执行js脚本文件\nset - BOT设置\nsetshort - 设置自定义按钮\nsnode - 选择脚本后台运行\nstart - 开始使用本程序\n")])])]),t("p",[a._v("参考教程："),t("a",{attrs:{href:"https://blog.mo0.top/archives/13/",target:"_blank",rel:"noopener noreferrer"}},[a._v("青龙Bot配置详解"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"数据迁移"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据迁移"}},[a._v("#")]),a._v(" 数据迁移")]),a._v(" "),t("h3",{attrs:{id:"迁移到nas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#迁移到nas"}},[a._v("#")]),a._v(" 迁移到NAS")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在NAS上启动新容器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /volume2/docker/ql/data:/ql/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   whyour/qinglong:latest\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 从旧服务器复制数据")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" root@old-server:/root/ql/data/ /volume2/docker/ql/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 批量授权文件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("777")]),a._v(" /volume2/docker/ql/data\n")])])]),t("h3",{attrs:{id:"使用压缩包迁移"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用压缩包迁移"}},[a._v("#")]),a._v(" 使用压缩包迁移")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在旧服务器压缩")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-czvf")]),a._v(" data.tar.gz /root/ql/data/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 传输到新服务器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" data.tar.gz root@new-server:/volume2/docker/ql/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 解压")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /volume2/docker/ql/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xzvf")]),a._v(" data.tar.gz\n")])])]),t("h2",{attrs:{id:"依赖安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#依赖安装"}},[a._v("#")]),a._v(" 依赖安装")]),a._v(" "),t("h3",{attrs:{id:"常见依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见依赖"}},[a._v("#")]),a._v(" 常见依赖")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更新npm")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装Python依赖")]),a._v("\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" requests\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" pytz\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装Node.js依赖")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" download\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" jsdom\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" png-js md5 date-fns axios crypto-js\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装canvas（需要编译环境）")]),a._v("\napk "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" --no-cache build-base g++ cairo-dev pango-dev giflib-dev\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /ql/scripts\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" canvas --build-from-source\n")])])]),t("h3",{attrs:{id:"依赖问题排查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#依赖问题排查"}},[a._v("#")]),a._v(" 依赖问题排查")]),a._v(" "),t("p",[t("strong",[a._v("错误：Cannot find module 'xxxx'")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" qinglong "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /ql/scripts\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用pnpm或npm安装")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" xxxx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" xxxx\n")])])]),t("p",[t("strong",[a._v("错误：Cannot find module './xxxx'")])]),a._v(" "),t("p",[a._v("检查拉库命令是否完整，确保依赖文件也被拉取。")]),a._v(" "),t("h2",{attrs:{id:"cookie管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie管理"}},[a._v("#")]),a._v(" Cookie管理")]),a._v(" "),t("h3",{attrs:{id:"添加cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加cookie"}},[a._v("#")]),a._v(" 添加Cookie")]),a._v(" "),t("ol",[t("li",[a._v("登录青龙面板")]),a._v(" "),t("li",[a._v('进入"环境变量"页面')]),a._v(" "),t("li",[a._v("添加变量：\n"),t("ul",[t("li",[a._v("名称："),t("code",[a._v("JD_COOKIE")])]),a._v(" "),t("li",[a._v("值：从浏览器获取的cookie")])])]),a._v(" "),t("li",[a._v("保存并启用")])]),a._v(" "),t("h3",{attrs:{id:"多账号管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多账号管理"}},[a._v("#")]),a._v(" 多账号管理")]),a._v(" "),t("p",[a._v("每个账号一个cookie，使用相同的名称"),t("code",[a._v("JD_COOKIE")]),a._v("，系统会自动识别为多个账号。")]),a._v(" "),t("h2",{attrs:{id:"定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定时任务"}},[a._v("#")]),a._v(" 定时任务")]),a._v(" "),t("h3",{attrs:{id:"添加定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加定时任务"}},[a._v("#")]),a._v(" 添加定时任务")]),a._v(" "),t("ol",[t("li",[a._v('进入"定时任务"页面')]),a._v(" "),t("li",[a._v('点击"添加任务"')]),a._v(" "),t("li",[a._v("填写：\n"),t("ul",[t("li",[a._v("任务名称")]),a._v(" "),t("li",[a._v("命令："),t("code",[a._v("task script.js")])]),a._v(" "),t("li",[a._v("Cron表达式："),t("code",[a._v("0 0 * * *")]),a._v("（每天0点）")])])]),a._v(" "),t("li",[a._v("保存并启用")])]),a._v(" "),t("h3",{attrs:{id:"cron表达式示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cron表达式示例"}},[a._v("#")]),a._v(" Cron表达式示例")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# 每天凌晨2点\n0 2 * * *\n\n# 每6小时\n0 */6 * * *\n\n# 每天9点和21点\n0 9,21 * * *\n\n# 每隔5分钟\n*/5 * * * *\n")])])]),t("h2",{attrs:{id:"安全建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安全建议"}},[a._v("#")]),a._v(" 安全建议")]),a._v(" "),t("ol",[t("li",[t("p",[t("strong",[a._v("修改默认端口：")])]),a._v(" "),t("ul",[t("li",[a._v("映射端口时使用非标准端口")])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("使用强密码：")])]),a._v(" "),t("ul",[t("li",[a._v("登录后立即修改密码")])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("限制访问：")])]),a._v(" "),t("ul",[t("li",[a._v("使用防火墙限制访问IP")]),a._v(" "),t("li",[a._v("不要将面板暴露到公网")])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("定期备份：")])]),a._v(" "),t("ul",[t("li",[a._v("定期备份data目录")]),a._v(" "),t("li",[a._v("包含配置、数据库和脚本")])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("更新维护：")])]),a._v(" "),t("ul",[t("li",[a._v("定期更新青龙版本")]),a._v(" "),t("li",[a._v("及时更新脚本仓库")])])])]),a._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[a._v("#")]),a._v(" 参考资料")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/whyour/qinglong",target:"_blank",rel:"noopener noreferrer"}},[a._v("青龙面板GitHub仓库"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://blog.mo0.top/archives/13/",target:"_blank",rel:"noopener noreferrer"}},[a._v("青龙Bot配置教程"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.kejiwanjia.com/jiaocheng/55286.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("脚本仓库汇总"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);