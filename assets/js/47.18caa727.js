(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{360:function(s,a,t){"use strict";t.r(a);var n=t(27),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ubuntu-服务器运维实用笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-服务器运维实用笔记"}},[s._v("#")]),s._v(" Ubuntu 服务器运维实用笔记")]),s._v(" "),a("p",[s._v("在使用 Ubuntu 服务器的过程中，我积累了不少零散的命令和配置技巧。为了方便日后查阅，也为了与大家分享，我将这些笔记整理成文。内容涵盖了文件处理、网络配置、常用服务安装等多个方面，希望能成为你运维工具箱里的一份实用备忘。")]),s._v(" "),a("h2",{attrs:{id:"一、文件与压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、文件与压缩"}},[s._v("#")]),s._v(" 一、文件与压缩")]),s._v(" "),a("p",[s._v("打包和解压是日常操作的必备技能。")]),s._v(" "),a("h3",{attrs:{id:"tar-命令-tarballs-tar-gz"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tar-命令-tarballs-tar-gz"}},[s._v("#")]),s._v(" "),a("code",[s._v("tar")]),s._v(" 命令 (tarballs, "),a("code",[s._v(".tar.gz")]),s._v(")")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("压缩")]),s._v("：将文件或目录打包并用 gzip 压缩。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -z: 使用 gzip 压缩")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -c: 创建归档")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -v: 显示过程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -f: 指定文件名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zcvf")]),s._v(" archive_name.tar.gz file_or_directory_to_compress\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("解压缩")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -x: 解开归档")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" archive_name.tar.gz\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"zip-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zip-命令"}},[s._v("#")]),s._v(" "),a("code",[s._v("zip")]),s._v(" 命令")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("压缩")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩单个文件或空目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" archive_name.zip file_to_compress\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归压缩目录及其所有内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" archive_name.zip directory_to_compress\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("解压缩")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压到当前目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" archive_name.zip\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压到指定目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" /path/to/destination archive_name.zip\n")])])])])]),s._v(" "),a("h2",{attrs:{id:"二、网络与防火墙"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、网络与防火墙"}},[s._v("#")]),s._v(" 二、网络与防火墙")]),s._v(" "),a("h3",{attrs:{id:"使用-iptables-开放端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-iptables-开放端口"}},[s._v("#")]),s._v(" 使用 "),a("code",[s._v("iptables")]),s._v(" 开放端口")]),s._v(" "),a("p",[a("code",[s._v("iptables")]),s._v(" 是 Linux 内核集成的强大防火墙工具。以下是如何用它来开放端口。")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("安装 "),a("code",[s._v("iptables")])]),s._v(" (如果尚未安装)：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" iptables\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("添加规则以开放端口")]),s._v(" (例如 80 端口)：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -I INPUT: 在 INPUT 链的开头插入规则")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -p tcp: 协议为 TCP")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --dport 80: 目标端口为 80")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -j ACCEPT: 接受数据包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" iptables "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" INPUT "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" tcp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dport")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j")]),s._v(" ACCEPT\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("持久化规则")]),s._v("：\n上述规则在服务器重启后会失效。为了永久保存，需要安装 "),a("code",[s._v("iptables-persistent")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" iptables-persistent\n")])])]),a("p",[s._v("安装过程中会询问是否保存当前的 IPv4 和 IPv6 规则，选择 “Yes”。")]),s._v(" "),a("p",[s._v("之后，每当修改了 "),a("code",[s._v("iptables")]),s._v(" 规则，运行以下命令即可保存：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" netfilter-persistent save\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"网络诊断工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络诊断工具"}},[s._v("#")]),s._v(" 网络诊断工具")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("测试端口连通性 "),a("code",[s._v("telnet")])]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试能否连接到 192.168.31.105 的 22 端口")]),s._v("\ntelnet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".31.105 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("查看端口占用 "),a("code",[s._v("netstat")]),s._v(" 或 "),a("code",[s._v("lsof")])]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 netstat 查看所有监听中的 TCP/UDP 端口及其进程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-tulnp")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 lsof 查看指定端口的占用情况")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("port_number"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("安装 "),a("code",[s._v("ifconfig")])]),s._v(":\n新版的 Ubuntu 可能默认不带 "),a("code",[s._v("ifconfig")]),s._v("，可以通过安装 "),a("code",[s._v("net-tools")]),s._v(" 来获取。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" net-tools\n")])])])])]),s._v(" "),a("h2",{attrs:{id:"三、常用服务安装与管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、常用服务安装与管理"}},[s._v("#")]),s._v(" 三、常用服务安装与管理")]),s._v(" "),a("h3",{attrs:{id:"ssh-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-服务"}},[s._v("#")]),s._v(" SSH 服务")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("安装与管理")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查 SSH 服务状态")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 SSH 服务端")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssh-server\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" start\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("允许 root 用户登录")]),s._v("：\n出于安全考虑，不建议在公网服务器上开启。但在特定内网或测试环境需要时：")]),s._v(" "),a("ol",[a("li",[s._v("编辑 "),a("code",[s._v("/etc/ssh/sshd_config")]),s._v("。")]),s._v(" "),a("li",[s._v("将 "),a("code",[s._v("#PermitRootLogin prohibit-password")]),s._v(" 修改或添加为 "),a("code",[s._v("PermitRootLogin yes")]),s._v("。")]),s._v(" "),a("li",[s._v("同时确保 "),a("code",[s._v("PasswordAuthentication yes")]),s._v(" 是开启的（如果希望用密码登录）。")]),s._v(" "),a("li",[s._v("重启 SSH 服务："),a("code",[s._v("sudo service ssh restart")]),s._v("。")])])])]),s._v(" "),a("h3",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[s._v("#")]),s._v(" Nginx")]),s._v(" "),a("p",[s._v("从源码编译安装 Nginx 提供了更高的定制性。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载源码并解压")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://nginx.org/download/nginx-1.19.4.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" nginx-1.19.4.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.19.4/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置安装目录")]),s._v("\n./configure "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译并安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 Nginx")]),s._v("\n/usr/local/nginx/sbin/nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (可选) 创建软链接，方便全局调用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/nginx/sbin/nginx /usr/bin/nginx\n")])])]),a("h3",{attrs:{id:"redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[s._v("#")]),s._v(" Redis")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 Redis 服务器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis-server\n")])])]),a("p",[a("strong",[s._v("配置远程访问")]),s._v("：")]),s._v(" "),a("ol",[a("li",[s._v("编辑配置文件 "),a("code",[s._v("sudo vi /etc/redis/redis.conf")]),s._v("。")]),s._v(" "),a("li",[s._v("将 "),a("code",[s._v("bind 127.0.0.1")]),s._v(" 注释掉（在行首加 "),a("code",[s._v("#")]),s._v("），或改为 "),a("code",[s._v("bind 0.0.0.0")]),s._v("。")]),s._v(" "),a("li",[s._v("将 "),a("code",[s._v("protected-mode yes")]),s._v(" 改为 "),a("code",[s._v("protected-mode no")]),s._v("。")]),s._v(" "),a("li",[s._v("重启 Redis 服务："),a("code",[s._v("sudo service redis-server restart")]),s._v("。")])]),s._v(" "),a("p",[a("strong",[s._v("注意")]),s._v("：开放 Redis 到公网非常危险，请确保设置了强密码并有其他防火墙规则保护。")]),s._v(" "),a("h3",{attrs:{id:"mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[s._v("#")]),s._v(" MySQL")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("通过 "),a("code",[s._v("apt")]),s._v(" 安装后")]),s._v("，默认的 root 密码信息可能存储在 "),a("code",[s._v("/etc/mysql/debian.cnf")]),s._v(" 中。")]),s._v(" "),a("li",[a("strong",[s._v("为 root 用户设置新密码 (MySQL 8.0+)")]),s._v("："),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 登录 MySQL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" IDENTIFIED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" mysql_native_password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'YourNewPassword'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])]),s._v(" "),a("li",[a("strong",[s._v("允许远程访问")]),s._v("："),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" IDENTIFIED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'YourNewPassword'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OPTION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])]),s._v(" "),a("h2",{attrs:{id:"四、系统管理与故障排除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、系统管理与故障排除"}},[s._v("#")]),s._v(" 四、系统管理与故障排除")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("设置 root 密码")]),s._v("：\n新安装的 Ubuntu Server 可能没有为 root 用户设置密码，可以通过当前用户执行：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" root\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("进程管理")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有与 node 相关的进程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结束指定 PID 的进程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1234")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("解决 "),a("code",[s._v("vi")]),s._v(" 编辑器方向键变 ABCD")]),s._v("：\n这是因为安装了不完整的 vim 版本。重新安装完整版即可。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" remove vim-common\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("解决 "),a("code",[s._v("dpkg frontend lock")]),s._v(" 错误")]),s._v("：\n当有其他 "),a("code",[s._v("apt")]),s._v(" 进程正在运行时，会遇到此错误。如果确定没有其他 "),a("code",[s._v("apt")]),s._v(" 在运行，可能是上次异常退出导致的锁文件残留。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制删除锁文件（请谨慎使用）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /var/lib/dpkg/lock\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("定时任务 "),a("code",[s._v("crontab")])]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前用户的定时任务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑定时任务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有定时任务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v("\n")])])])])]),s._v(" "),a("p",[s._v("希望这份笔记能为你的 Ubuntu 运维工作带来一些便利。")])])}),[],!1,null,null,null);a.default=e.exports}}]);