(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{413:function(a,t,s){"use strict";s.r(t);var e=s(27),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"mybatis使用技巧与常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis使用技巧与常见问题"}},[a._v("#")]),a._v(" MyBatis使用技巧与常见问题")]),a._v(" "),t("p",[a._v("MyBatis作为一款优秀的持久层框架，在使用过程中有一些需要注意的地方。本文总结了MyBatis开发中的常见问题和解决方案。")]),a._v(" "),t("h2",{attrs:{id:"和-的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#和-的区别"}},[a._v("#")]),a._v(" ${}和#{}的区别")]),a._v(" "),t("p",[a._v("在MyBatis的SQL映射文件中，参数有两种引用方式："),t("code",[a._v("#{}")]),a._v("和"),t("code",[a._v("${}")]),a._v("，它们的区别非常重要。")]),a._v(" "),t("h3",{attrs:{id:"主要区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主要区别"}},[a._v("#")]),a._v(" 主要区别")]),a._v(" "),t("ol",[t("li",[t("p",[t("strong",[a._v("预编译机制")])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("#{}")]),a._v("：使用预编译方式，会被替换成"),t("code",[a._v("?")]),a._v("占位符，然后通过PreparedStatement设置参数")]),a._v(" "),t("li",[t("code",[a._v("${}")]),a._v("：是字符串替换，直接将参数值拼接到SQL中")])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("SQL注入风险")])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("#{}")]),a._v("：由于使用预编译，可以有效防止SQL注入攻击")]),a._v(" "),t("li",[t("code",[a._v("${}")]),a._v("：直接拼接字符串，存在SQL注入风险")])])]),a._v(" "),t("li",[t("p",[t("strong",[a._v("使用场景")])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("#{}")]),a._v("：用于传递参数值，适用于大多数场景")]),a._v(" "),t("li",[t("code",[a._v("${}")]),a._v("：用于动态SQL片段，如表名、字段名等无法使用占位符的场景")])])])]),a._v(" "),t("h3",{attrs:{id:"使用建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用建议"}},[a._v("#")]),a._v(" 使用建议")]),a._v(" "),t("ul",[t("li",[a._v("优先使用"),t("code",[a._v("#{}")]),a._v("方式传递参数")]),a._v(" "),t("li",[a._v("只有在必须动态拼接SQL结构时才使用"),t("code",[a._v("${}")])]),a._v(" "),t("li",[a._v("使用"),t("code",[a._v("${}")]),a._v("时要特别注意参数来源，避免SQL注入风险")])]),a._v(" "),t("p",[a._v("参考资料："),t("a",{attrs:{href:"https://blog.csdn.net/super_DuoLa/article/details/121971500",target:"_blank",rel:"noopener noreferrer"}},[a._v("MyBatis参数传递详解"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"param注解使用问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#param注解使用问题"}},[a._v("#")]),a._v(" @Param注解使用问题")]),a._v(" "),t("h3",{attrs:{id:"问题描述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[a._v("#")]),a._v(" 问题描述")]),a._v(" "),t("p",[a._v("在MyBatis接口方法中传递参数时，如果不使用"),t("code",[a._v("@Param")]),a._v("注解，可能会遇到以下错误：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("org.apache.ibatis.binding.BindingException: Parameter '参数名' not found.\n")])])]),t("h3",{attrs:{id:"解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[a._v("#")]),a._v(" 解决方案")]),a._v(" "),t("p",[a._v("有以下几种方式可以解决这个问题：")]),a._v(" "),t("h4",{attrs:{id:"方式一-使用-param注解-推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式一-使用-param注解-推荐"}},[a._v("#")]),a._v(" 方式一：使用@Param注解（推荐）")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Mapper接口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("selectByNameAndAge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Param")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Param")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Integer")]),a._v(" age"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- XML映射文件 --\x3e")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("select")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("id")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("selectByNameAndAge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("resultType")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    SELECT * FROM user WHERE name = #{name} AND age = #{age}\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),t("h4",{attrs:{id:"方式二-使用单个对象参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式二-使用单个对象参数"}},[a._v("#")]),a._v(" 方式二：使用单个对象参数")]),a._v(" "),t("p",[a._v("如果参数较多，可以封装成一个对象：")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("selectByCondition")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UserQuery")]),a._v(" query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("select")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("id")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("selectByCondition"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("resultType")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("User"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    SELECT * FROM user WHERE name = #{name} AND age = #{age}\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("select")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),t("h4",{attrs:{id:"方式三-使用map传参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式三-使用map传参"}},[a._v("#")]),a._v(" 方式三：使用Map传参")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("selectByMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" params"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("h3",{attrs:{id:"最佳实践"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最佳实践"}},[a._v("#")]),a._v(" 最佳实践")]),a._v(" "),t("ol",[t("li",[t("strong",[a._v("单个参数")]),a._v("：可以不使用"),t("code",[a._v("@Param")]),a._v("，直接在SQL中引用")]),a._v(" "),t("li",[t("strong",[a._v("多个参数")]),a._v("：建议使用"),t("code",[a._v("@Param")]),a._v("注解明确指定参数名")]),a._v(" "),t("li",[t("strong",[a._v("参数较多")]),a._v("：封装成对象或使用Map传递")])]),a._v(" "),t("p",[a._v("使用"),t("code",[a._v("@Param")]),a._v("注解的好处是代码更加清晰，不容易出错，特别是在多人协作的项目中。")]),a._v(" "),t("p",[a._v("参考资料："),t("a",{attrs:{href:"https://blog.51cto.com/u_12393361/5021343",target:"_blank",rel:"noopener noreferrer"}},[a._v("解决MyBatis参数绑定问题"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"mybatis-generator代码生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-generator代码生成"}},[a._v("#")]),a._v(" MyBatis Generator代码生成")]),a._v(" "),t("p",[a._v("MyBatis Generator是一个可以自动生成MyBatis映射文件和实体类的工具，可以大大提高开发效率。")]),a._v(" "),t("h3",{attrs:{id:"使用步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤"}},[a._v("#")]),a._v(" 使用步骤")]),a._v(" "),t("ol",[t("li",[a._v("配置generatorConfig.xml文件")]),a._v(" "),t("li",[a._v("配置数据库连接信息")]),a._v(" "),t("li",[a._v("配置要生成的表信息")]),a._v(" "),t("li",[a._v("运行Generator生成代码")])]),a._v(" "),t("p",[a._v("详细配置和使用方法可以参考："),t("a",{attrs:{href:"https://blog.csdn.net/cx19910829/article/details/126889724",target:"_blank",rel:"noopener noreferrer"}},[a._v("MyBatis Generator详细教程"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[a._v("#")]),a._v(" 小结")]),a._v(" "),t("p",[a._v("MyBatis的使用需要注意参数传递方式的选择和SQL注入防护。合理使用"),t("code",[a._v("#{}")]),a._v("和"),t("code",[a._v("${}")]),a._v("，正确添加"),t("code",[a._v("@Param")]),a._v("注解，可以避免很多常见问题。同时，利用MyBatis Generator等工具可以提高开发效率，减少重复劳动。")])])}),[],!1,null,null,null);t.default=n.exports}}]);