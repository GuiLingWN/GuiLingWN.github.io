(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{353:function(a,s,t){"use strict";t.r(s);var e=t(27),v=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"debian-系统开启-ipv6-与转发功能小记"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debian-系统开启-ipv6-与转发功能小记"}},[a._v("#")]),a._v(" Debian 系统开启 IPv6 与转发功能小记")]),a._v(" "),s("p",[a._v("在服务器管理中，随着 IPv6 的普及，我们经常需要对网络进行相应配置。这篇文章将分享一下在 Debian 系统上如何启用 IPv6 和 IP 转发功能，并记录几个实用的网络命令，希望能为有需要的朋友提供一些参考。")]),a._v(" "),s("h2",{attrs:{id:"启用-ipv6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启用-ipv6"}},[a._v("#")]),a._v(" 启用 IPv6")]),a._v(" "),s("p",[a._v("在某些系统或网络环境下，IPv6 可能被默认禁用了。如果需要启用它，我们可以通过修改内核参数来实现。")]),a._v(" "),s("p",[a._v("首先，检查或修改 "),s("code",[a._v("/etc/sysctl.conf")]),a._v(" 配置文件，确保以下两项参数被设置为 "),s("code",[a._v("0")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("net.ipv6.conf.all.disable_ipv6")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("0")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("net.ipv6.conf.default.disable_ipv6")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("0")]),a._v("\n")])])]),s("ul",[s("li",[s("code",[a._v("net.ipv6.conf.all.disable_ipv6 = 0")]),a._v("：为所有接口启用 IPv6。")]),a._v(" "),s("li",[s("code",[a._v("net.ipv6.conf.default.disable_ipv6 = 0")]),a._v("：为默认接口启用 IPv6。")])]),a._v(" "),s("p",[a._v("修改配置文件后，执行以下命令让配置立即生效：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sysctl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("\n")])])]),s("p",[a._v("我们也可以使用 "),s("code",[a._v("sysctl")]),a._v(" 命令直接查看当前的参数值，例如：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sysctl")]),a._v(" net.ipv6.conf.all.disable_ipv6\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sysctl")]),a._v(" net.ipv6.conf.default.disable_ipv6\n")])])]),s("h2",{attrs:{id:"开启-ip-转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启-ip-转发"}},[a._v("#")]),a._v(" 开启 IP 转发")]),a._v(" "),s("p",[a._v("如果希望你的服务器能像路由器一样转发网络数据包（例如，在搭建 VPN 或虚拟网络环境时），就需要开启 IP 转发功能。")]),a._v(" "),s("p",[a._v("同样，在 "),s("code",[a._v("/etc/sysctl.conf")]),a._v(" 文件中添加或修改以下配置：")]),a._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 开启 IPv4 转发")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("net.ipv4.ip_forward")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 开启 IPv6 转发")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("net.ipv6.conf.all.forwarding")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1")]),a._v("\n")])])]),s("p",[a._v("保存后，别忘了执行 "),s("code",[a._v("sysctl -p")]),a._v(" 使之生效。")]),a._v(" "),s("h2",{attrs:{id:"常用网络命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用网络命令"}},[a._v("#")]),a._v(" 常用网络命令")]),a._v(" "),s("p",[a._v("这里也记录两个在配置过程中可能会用到的命令。")]),a._v(" "),s("ol",[s("li",[s("p",[s("strong",[a._v("查看所有网卡及 IP 地址")])]),a._v(" "),s("p",[a._v("这个命令可以列出系统上所有网络接口的详细信息，包括 IPv4 和 IPv6 地址。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" address list\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者简写为")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" addr\n")])])])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("获取访问外部地址时使用的源 IPv6 地址")])]),a._v(" "),s("p",[a._v("这是一个很有用的小技巧，可以通过 "),s("code",[a._v("ip route")]),a._v(" 命令模拟一次路由查询，从而得知访问某个特定目的地址时，系统会使用哪个源 IP 地址。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 比如，获取访问 240c::6666 时所使用的源 IPv6 地址")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" route get 240c::6666 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" -F"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'src '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $2}'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cut")]),a._v(" -d"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f1")]),a._v("\n")])])])])]),a._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),s("p",[a._v("通过简单修改 "),s("code",[a._v("sysctl.conf")]),a._v(" 配置文件，我们就可以方便地在 Debian 系统上控制 IPv6 和 IP 转发的开关。这些基础网络配置虽然简单，却是许多高级网络应用的前提。希望这篇简短的笔记能对你有所帮助。")])])}),[],!1,null,null,null);s.default=v.exports}}]);